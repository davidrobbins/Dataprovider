<!DOCTYPE html><html>
<head>
<title>Main Page</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="Wakanda GUIDesigner"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
	<meta name="wakanda-version" content="Dev build 0.118148"/>
		<meta name="wakanda-build" content="0.118148"/>
		
		
		
<meta name="WAF.config.loadJS" id="waf-script" content="scripts/index.js"/>
		<meta name="WAF.config.loadCSS" id="waf-palette" content="/walib/WAF/widget/palette/css/widget-palette-default.css"/>
		<meta name="WAF.config.loadCSS" id="waf-interface-css" content="styles/index.css"/>
		<meta name="WAF.config.loadCSS" content="/application.css"/>
		<meta name="WAF.config.loadCSS" content="/styles/customIndex.css"/>
		<meta name="WAF.config.loadCSS" id="waf-project-css" content="/application.css"/>
</head>

<body id="waf-body" data-viewport-width="device-width" data-viewport-minimum-scale="1.0" data-viewport-maximum-scale="1.0" data-viewport-initial-scale="1.0" data-type="document" data-theme="default" data-rpc-validation="false" data-rpc-namespace="rpc" data-rpc-activate="false" data-platform="desktop" data-lib="WAF" data-group="[['tabView1','menuBar1','container7','container8','container9','container10']]" data-apple-meta-tags-status-bar="default" class="default" style="visibility:hidden;">
		<div id="container5" data-type="container" data-lib="WAF" data-constraint-top="true" data-constraint-left="true" class="waf-widget waf-container default inherited  ">
	 	<div id="richText1" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">Dataprovider Example : A tale of 497 Cities</div>
 	</div>
		<div id="container6" data-type="container" data-lib="WAF" data-constraint-top="true" data-constraint-left="true" class="waf-widget waf-container default inherited  ">
 		<div id="richText9" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="true" class="waf-widget waf-richText default inherited  "></div>
 		<div id="richText10" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="true" class="waf-widget waf-richText default inherited  "></div>
 		<div id="richText11" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="true" class="waf-widget waf-richText default inherited  "></div>
 		<div id="richText12" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">Last Execution Time :</div>
 		<div id="richText13" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="true" class="waf-widget waf-richText default inherited  "></div>
 		<div id="tabView1" data-type="tabView" data-padding="5" data-menu-position="top left" data-linked-tag="menuBar1,container7,container8,container9,container10,container11" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-tabView default inherited  ">
	 	 	<ul id="menuBar1" data-type="menuBar" data-tab-margin="5" data-subMenuShow="hover" data-linked-tag="tabView1" data-lib="WAF" data-level="0" data-display="horizontal" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-menuBar default inherited                      waf-tabView-menuBar waf-tabView-menuBar-top-left "><li id="menuItem1" data-type="menuItem" data-linked-tag="container7,richText23" data-lib="WAF" data-constraint-top="true" data-constraint-left="true" class="waf-widget waf-menuItem default inherited  "><p class="waf-menuItem-text waf-menuItem-icon-top"><span>Intro</span></p>	<div id="richText23" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-linked-tag="menuItem1" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited      waf-richText-level-0 waf-level-0 ">Intro</div>
 	 	 	 	</li><li id="menuItem2" data-type="menuItem" data-linked-tag="container8,richText24" data-lib="WAF" data-constraint-top="true" data-constraint-left="true" class="waf-widget waf-menuItem default inherited  "><p class="waf-menuItem-text waf-menuItem-icon-top"><span>Example 1</span></p>	<div id="richText24" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-linked-tag="menuItem2" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited      waf-richText-level-0 waf-level-0 ">Example 1</div>
 	 	 	 	</li><li id="menuItem3" data-type="menuItem" data-linked-tag="container9,richText25" data-lib="WAF" data-constraint-top="true" data-constraint-left="true" class="waf-widget waf-menuItem default inherited  "><p class="waf-menuItem-text waf-menuItem-icon-top"><span>Example 2</span></p>	<div id="richText25" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-linked-tag="menuItem3" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited      waf-richText-level-0 waf-level-0 ">Example 2</div>
 	 	 	 	</li><li id="menuItem4" data-type="menuItem" data-linked-tag="container10,richText26" data-lib="WAF" data-constraint-top="true" data-constraint-left="true" class="waf-widget waf-menuItem default inherited  "><p class="waf-menuItem-text waf-menuItem-icon-top"><span>Example 3</span></p>	<div id="richText26" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-linked-tag="menuItem4" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited      waf-richText-level-0 waf-level-0 ">Example 3</div>
 	 	 	 	</li><li id="menuItem5" data-type="menuItem" data-linked-tag="container11,richText27" data-lib="WAF" data-constraint-top="true" data-constraint-left="true" class="waf-widget waf-menuItem default inherited  "><p class="waf-menuItem-text waf-menuItem-icon-top"><span>Example 4</span></p>	<div id="richText27" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-linked-tag="menuItem5" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited      waf-richText-level-0 waf-level-0 ">Example 4</div>
 	 	 	 	</li></ul>
 	 		<div id="container7" data-type="container" data-linked-tag="menuItem1" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited      waf-tabView-container-level-0 ">
 	 	 		<div id="image5" data-type="image" data-target="_blank" data-lib="WAF" data-label-position="left" data-label="" data-fit="0" data-constraint-top="true" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="false" class="waf-widget waf-image default inherited  "></div>
 	 	 		<div id="richText2" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">This example was written to give you an introduction to the Wakanda Dataprovider API. </div>
 	 	 		<div id="richText3" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">The Dataprovider API is part of the Wakanda AJAX Framework, which includes all the APIs that are available on the client side of Wakanda.</div>
 	 	 		<div id="richText4" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">The Dataprovider provides an API that let's you work directly with entity collections and entities on the client in almost exactly the same way as you do on the server. Use the Dataprovider API to manage the entity and entity collections of your datastore directly from the client.</div>
 	 	 		<div id="richText5" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">If you have written any Wakanda applications you are probably framiliar with the other two Wakanda data access APIs - Datastore  - which is used on the server, and Datasource - which is used on the client to manage automatic functions between the widgets on your interface pages and  your data.</div>
 	 	 		<div id="richText6" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">So when would you use the Dataprovider API? You might use it if you wanted to feed data to another client-side Javascript UI framework such as EXT-JS. Or maybe you just want to access data from the server and manage it yourself without displaying it in one of the Wakanda widgets.</div>
 	 	 		<div id="richText7" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">This example has one dataclass - City. It is loaded with the names of 497 cities. What we want to do is simple - get the names of all the cities and display the results in a container. We use the Dataprovider API to load the names of the cities from the server, and then use jQuery to update the contents of the container with the list of cities.</div>
 	 	 		<div id="richText8" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">Each example tab shows you a slightly different way to use the Dataprovider to load the cities from the server. The first example is an anti-pattern. It only loads the first 40 of the 497 cities. Example 2 is better. It loads all the cities. But in example 3 and 4 we refine our technique to load the cities even faster.</div>
 	 	 	</div>
 	 		<div id="container8" data-type="container" data-linked-tag="menuItem2" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited          waf-tabView-container-level-0 ">
	 	 	 		<button id="button1" data-type="button" data-text="Load Cities" data-target="_blank" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-action="simple" class="waf-widget waf-button default inherited  "></button>
 	 	 		<div id="container13" data-type="container" data-lib="WAF" data-constraint-top="false" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="true" class="waf-widget waf-container default inherited  "></div>
 	 	 			<div id="image3" data-type="image" data-target="_blank" data-lib="WAF" data-label-position="left" data-label="" data-fit="0" data-constraint-top="false" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="true" class="waf-widget waf-image default inherited  "></div>
 	 	 				<div id="richText14" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">In our first attempt to load the cities using the Dataprovider API we fall a bit short. Only the first 40 cities are loaded into our container. The code below might look correct but there is a problem. The query is written correctly. And we are passing in an option block with an onSuccess function where will loop thru the entity collection returned in event.entity.</div>
 	 	 		<div id="richText18" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">The entity collection does contain all 497 cities. And the for loop does loop 497 times. And each time thru the loop we execute a getEntity() method against our collection and append the value to the myHTML variable. And of course we are executing the getEntity() method asynchronously so our client interface will be locked.</div>
 	 	 		<div id="richText19" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">So why do we only see 40 cities in our container? The for loop queues up the 497 callbacks from the getEntity() methods. The first 40 callbacks execute before the for loop can finish because the first 40 entities are loaded with the query. For the 41st call the entity is not in the client cache and has to be loaded from the server. But before it can finish the for loop completes and we update the contents of the container - with only the first 40 cities.</div>
 	 	 	</div>
 	 		<div id="container9" data-type="container" data-linked-tag="menuItem3" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited      waf-tabView-container-level-0 ">
	 	 	 	<div id="image4" data-type="image" data-target="_blank" data-lib="WAF" data-label-position="left" data-label="" data-fit="0" data-constraint-top="false" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="true" class="waf-widget waf-image default inherited  "></div>
 	 	 		<div id="container2" data-type="container" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited  "></div>
 	 	 		<button id="button2" data-type="button" data-text="Load Cities" data-target="_blank" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-action="simple" class="waf-widget waf-button default inherited  "></button>
 	 	 		<div id="richText15" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">This time we do successfully load our container with all 497 cities. But we end up making 12 calls to the server. </div>
 	 	 		<div id="richText20" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">Using the forEach() method of the entity collection is better than the for loop in example 1. The forEach will execute our method on each member of the entityCollection so we do get all the cities loaded into the container. </div>
 	 	 		<div id="richText21" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">But because the Dataprovider only loads 40 entities at a time by default, we end up making 12 calls to the server. The next example will improve on this. </div>
 	 	 	</div>
 	 		<div id="container10" data-type="container" data-linked-tag="menuItem4" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited      waf-tabView-container-level-0 ">
	 	 	 	<div id="image1" data-type="image" data-target="_blank" data-lib="WAF" data-label-position="left" data-label="" data-fit="0" data-constraint-top="false" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="true" class="waf-widget waf-image default inherited  "></div>
 	 	 		<button id="button3" data-type="button" data-text="Load Cities" data-target="_blank" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-action="simple" class="waf-widget waf-button default inherited  "></button>
 	 	 		<div id="container3" data-type="container" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited  "></div>
 	 	 		<div id="richText16" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">This time we load all 497 cities into our container in only 2 calls to the server. Cool.</div>
 	 	 		<div id="richText22" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="true" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">The initial query loads the first 40 cities, and executing the toArray() method against the resulting entity collection loads the rest of the cities. </div>
 	 	 	</div>
 	 		<div id="container11" data-type="container" data-linked-tag="menuItem5" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited      waf-tabView-container-level-0 ">
	 	 	 	<button id="button4" data-type="button" data-text="Load Cities" data-target="_blank" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-action="simple" class="waf-widget waf-button default inherited  "></button>
 	 	 		<div id="container4" data-type="container" data-lib="WAF" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" class="waf-widget waf-container default inherited  "></div>
 	 	 		<div id="image2" data-type="image" data-target="_blank" data-lib="WAF" data-label-position="left" data-label="" data-fit="0" data-constraint-top="false" data-constraint-right="true" data-constraint-left="false" data-constraint-bottom="true" class="waf-widget waf-image default inherited  "></div>
 	 	 		<div id="richText17" data-type="richText" data-target="_blank" data-plainText="true" data-overflow="Hidden" data-lib="WAF" data-label-position="left" data-label="" data-constraint-top="true" data-constraint-right="false" data-constraint-left="true" data-constraint-bottom="false" data-autoWidth="false" class="waf-widget waf-richText default inherited  ">And the "pièce de résistance". We write a class method against the City datastore that returns all 497 cities. One call the the server. Very cool! </div>
 	 	 	</div>
 	 	</div>
 	</div>
		<script type="text/javascript" src="/waLib/WAF/Loader.js"></script>
	</body>
</html>